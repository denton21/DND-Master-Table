<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Управление боем</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Управление боем</h1>
    <button onclick="returnToCampaign()">
        <i class="fas fa-arrow-left"></i> Вернуться к кампании
    </button>

    <section>
        <h2>Добавить участника</h2>
        <select id="participant-type">
            <option value="player">Игрок</option>
            <option value="enemy">Враг</option>
        </select>
        <select id="participant-list"></select>
        <input type="number" id="initiative" placeholder="Инициатива">
        <input type="text" id="current-hp" placeholder="Текущие хиты (например, -2 или +5)">
        <button onclick="addParticipant(); playSound('add-swipe.mp3')">
            <i class="fas fa-plus"></i> Добавить
        </button>
    </section>

    <section>
        <h2>Участники боя</h2>
        <table id="combat-table">
            <tr>
                <th><i class="fas fa-users"></i> Категория</th>
                <th><i class="fas fa-user"></i> Имя</th>
                <th><i class="fas fa-dice"></i> Инициатива</th>
                <th><i class="fas fa-heart"></i> Текущие хиты / Максимум</th>
                <th><i class="fas fa-shield-alt"></i> Класс доспехов</th>
                <th><i class="fas fa-bolt"></i> Паровые заряды</th>
                <th><i class="fas fa-history"></i> История изменений</th>
                <th><i class="fas fa-cog"></i> Действия</th>
            </tr>
        </table>
        <button onclick="nextTurn(); playSound('next-turn.mp3')">
            <i class="fas fa-arrow-right"></i> Следующий ход
        </button>
        <span id="round-counter">Раунд: 0</span>
        <button onclick="clearAll(); playSound('clear.mp3')">
            <i class="fas fa-broom"></i> Очистить всё
        </button>
    </section>

    <section>
        <h2>Поле боя</h2>
        <div id="battlefield-settings">
            <button onclick="resetPositions(); playSound('button-click.mp3')">Сброс позиций</button>
            <button onclick="clearWalls(); playSound('button-click.mp3')">Очистить стены</button>
            <button id="draw-mode-toggle" onclick="toggleDrawMode(); playSound('button-click.mp3')">
                <i class="fas fa-pen"></i> Режим рисования
            </button>
            <button id="toggle-feet" onclick="toggleFeetDisplay(); playSound('button-click.mp3')">
                <i class="fas fa-ruler"></i> Футы
            </button>
        </div>
        <div id="battlefield-container">
            <div id="battlefield"></div>
        </div>
    </section>
    
    <!-- Панель кубиков -->
    <section>
        <h2>Бросок кубиков</h2>
        <div class="dice-container">
            <button onclick="rollDice(20)" class="dice-button">d20</button>
            <button onclick="rollDice(12)" class="dice-button">d12</button>
            <button onclick="rollDice(10)" class="dice-button">d10</button>
            <button onclick="rollDice(8)" class="dice-button">d8</button>
            <button onclick="rollDice(6)" class="dice-button">d6</button>
            <button onclick="rollDice(4)" class="dice-button">d4</button>
        </div>
        <div id="diceResult" class="dice-result"></div>
    </section>

    <!-- Подключаем отдельный JavaScript файл вместо встроенного скрипта -->
    <script src="combat.js"></script>
</body>
</html>